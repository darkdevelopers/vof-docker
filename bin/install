#!/bin/bash
#
# Usage: bin/install
# Description: Prepare the VOF docker env for first usage
#

RED='\033[0;31m'
GREEN='\033[0;32m'
YELLOW='\033[1;33m'
NC='\033[0m' # No Color

introduction() {
    echo -e "${NC}Start the install scripts ${NC} üê≥  üöÄ \n"
    echo ""
    echo -e "${NC}Dieses Installationsskript f√ºhrt Dich durch die notwendigen Schritte um die Docker-Environment nutzen zu k√∂nnen.${NC}\n"
    echo -e "${NC}Falls einer der Schritte fehl schl√§gt kannst du den Setup einfach noch mal starten.${NC}\n"

    echo -e "${NC}Du ben√∂tigst:\n${NC}"
    echo -e "  ${NC}1. Ein SSH-Key-Paar das mit deinem Bitbucket Account verkn√ºpft ist, so dass du die einzelnen Module klonen und bearbeiten kannst.${NC}"
    echo -e "${NC} Shutdown docker ${NC}"
    docker-compose down
}

downloadProject() {
    echo -e "${NC}Cloning Shop repo ${NC}"
    rm -rf html
    git clone git@bitbucket.org-vof:vofvapeshop/shop.vof.laravel.git html
    cd html
}

installLaravel() {
    echo -e "${NC}Install Project ${NC} \n"
    echo -e "${NC} start docker ${NC}"
    docker-compose up -d
    docker-compose exec php composer install
    docker-compose exec php php artisan ui vue
    docker-compose exec php npm install && npm run dev
    docker-compose exec php php artisan migrate
}

introduction
downloadProject
installLaravel
